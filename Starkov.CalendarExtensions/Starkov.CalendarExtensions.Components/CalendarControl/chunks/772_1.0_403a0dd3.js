"use strict";(self.webpackChunkcalendar_control=self.webpackChunkcalendar_control||[]).push([[772],{952:(e,t,a)=>{a.r(t),a.d(t,{default:()=>P});var n={};a.r(n),a.d(n,{default:()=>W});var r=a(783),l=a.n(r),s=a(745);let c=function(e){return e[e.Empty=0]="Empty",e[e.Work=1]="Work",e[e.Weekend=2]="Weekend",e[e.Holiday=3]="Holiday",e[e.Preholiday=4]="Preholiday",e}({});const o="Previous",d="Next";var u=a(793);function m(e,t){let a=new Date((new Date).setMonth(e));return(n=a.toLocaleString(t,{month:"long"})).charAt(0).toUpperCase()+n.slice(1);var n}const y=a(835),i=a(581),k=({Days:e,Culture:t})=>{const a=Array.from(new Set(e.map((e=>e.Date.getMonth()))));let n=[],r=[],s=[];return a.forEach((a=>{let c=e.filter((e=>e.Date.getMonth()==a));n.push(l().createElement(h,{key:a,Name:m(a,t),Days:c,Culture:t})),r.push(l().createElement(N,{key:a,Days:c,Culture:t})),s.push(l().createElement(E,{key:a,Days:c,Culture:t}))})),l().createElement("div",{className:"head-element quarter-block"},n,r,s)},h=({Days:e,Name:t})=>{const{t:a}=(0,u.$)();let n=e[0].Date,r=n.getDay();0==r&&(r=7);for(let t=1;t<r;t++){let a={Date:new Date(new Date(n).setDate(n.getDate()-t)),Type:c.Empty};e.unshift(a)}let s=e[e.length-1].Date,o=s.getDay();0==o&&(o=7);for(let t=1;t<=7-o;t++){let a={Date:new Date(new Date(s).setDate(s.getDate()+t)),Type:c.Empty};e.push(a)}const d=function(e){return[e("calendar.weekDays.monday"),e("calendar.weekDays.tuesday"),e("calendar.weekDays.wednesday"),e("calendar.weekDays.thursday"),e("calendar.weekDays.friday"),e("calendar.weekDays.saturday"),e("calendar.weekDays.sunday")]}(a).map(((e,t)=>{let a="day-item";return t>4&&(a+=" weekend"),l().createElement("h4",{key:e,className:a},e)}));return l().createElement("div",{className:"month-block"},l().createElement("h3",{className:"month-name"},t),l().createElement("div",{className:"days-grid week-header"}," ",d),l().createElement("div",{className:"days-grid"},e.map((e=>l().createElement(D,{key:e.Date.toDateString(),Date:e.Date,Type:e.Type})))))},D=({Date:e,Type:t})=>{let a="",n=e.getDate().toString();switch(t){case c.Empty:n="",a="empty";break;case c.Holiday:a="holiday";break;case c.Weekend:a="weekend";break;case c.Preholiday:a="preholiday"}let r=["day-item",a].join(" ");return l().createElement("div",{className:r},n)},p=({Stats:e})=>{const t=e.map((e=>l().createElement("div",{className:"stat",key:e.StatName},l().createElement("div",null,e.StatName),l().createElement("div",null,e.StatValue))));return l().createElement("div",{className:"stat-block"},t)},N=({Days:e})=>{let t=e.length,a=e.filter((e=>e.Type==c.Holiday||e.Type==c.Weekend)).length,n=e.filter((e=>e.Type==c.Preholiday||e.Type==c.Work)).length;const{t:r}=(0,u.$)();let s=[{StatName:r("calendar.statNames.all"),StatValue:t},{StatName:r("calendar.statNames.weekends"),StatValue:a},{StatName:r("calendar.statNames.work"),StatValue:n}];return l().createElement(p,{Stats:s})},E=({Days:e})=>{let t=e.filter((e=>e.Type==c.Preholiday||e.Type==c.Work)).length;const{t:a}=(0,u.$)();let n=[{StatName:a("calendar.statNames.40"),StatValue:Math.floor(t/5*40)},{StatName:a("calendar.statNames.36"),StatValue:Math.floor(t/5*36)},{StatName:a("calendar.statNames.24"),StatValue:Math.floor(t/5*24)}];return l().createElement(p,{Stats:n})},g=({Name:e,Days:t,BtnHandler:a,Culture:n})=>l().createElement("div",{className:"head-element"},l().createElement("div",{className:"header"},l().createElement("button",{className:"button",name:o,title:"Туда",onClick:a},l().createElement("img",{src:y})),l().createElement("h3",null,e),l().createElement("button",{className:"button",name:d,onClick:a},l().createElement("img",{src:i}))),l().createElement(N,{Days:t,Culture:n}),l().createElement(E,{Days:t,Culture:n}));var w=a(7),f=a.n(w),S=a(176),v=a(71),C=a(718);const b={en:{translation:JSON.parse('{"calendar":{"quarterName":"quarter","weekDays":{"monday":"Mon","tuesday":"Tue","wednesday":"Wed","thursday":"Thu","friday":"Fri","saturday":"Sat","sunday":"Sun"},"statNames":{"24":"24-hour week","36":"36-hour week","40":"40-hour week","all":"Calendar days","weekends":"Weekends and holidays","work":"Working days"}}}')},ru:{translation:JSON.parse('{"calendar":{"quarterName":"квартал","weekDays":{"monday":"Пн","tuesday":"Вт","wednesday":"Ср","thursday":"Чт","friday":"Пт","saturday":"Сб","sunday":"Вс"},"statNames":{"24":"24-часовая неделя","36":"36-часовая неделя","40":"40-часовая неделя","all":"Календарных дней","weekends":"Выходных и праздничных","work":"Рабочих дней"}}}')}};let T;T||(T=f().createInstance().use(S.Z).use(v.Z).use(C.Db).init({resources:b,debug:!0,fallbackLng:"en",supportedLngs:["en","ru","en-US","ru-RU"],initImmediate:!1}));function I(e,t){let a="";switch(e){case 1:a="I";break;case 2:a="II";break;case 3:a="III";break;case 4:a="IV"}return`${a} ${t("calendar.quarterName")}`}const M=({initialContext:e,api:t})=>{const[a,n]=(0,r.useState)((()=>t.getEntity())),[s,c]=l().useState(e),m=JSON.parse(a.JsonInfo).map((e=>({Date:new Date(e.Date),Type:e.Type}))),[y,i]=(0,r.useState)(Math.floor(((new Date).getMonth()+3)/3));let h=m.filter((e=>Math.floor((e.Date.getMonth()+3)/3)==y));const D=s.currentCulture??"ru",{t:p,i18n:N}=(0,u.$)();l().useEffect((()=>{N.changeLanguage(D)}),[D]);const E=l().useCallback((e=>{n(t.getEntity()),c(e)}),[t,n]);t.onControlUpdate=E;const w=e=>{let t=e.currentTarget.name,a=y;t==o?a-=1:t==d&&(a+=1),a>4?a=1:a<1&&(a=4),i(a)};return l().createElement("div",{className:"main"},l().createElement("div",{className:"lined"},l().createElement(g,{Name:a.Year.toString(),Days:m,BtnHandler:w,Culture:D})),l().createElement(g,{Name:I(y,p),Days:h,BtnHandler:w,Culture:D}),l().createElement(k,{Days:h,Culture:D}))},W=e=>{const t=(0,s.s)(e.container);return t.render(r.createElement(M,{initialContext:e.initialContext,api:e.api,controlInfo:e.controlInfo})),Promise.resolve((()=>t.unmount()))},P={"calendar-control-card-loader":n}},581:(e,t,a)=>{e.exports=a.p+"images/Next_1.0..svg"},835:(e,t,a)=>{e.exports=a.p+"images/Prev_1.0..svg"}}]);
//# sourceMappingURL=772_1.0_403a0dd3.js.map