"use strict";(self.webpackChunkcalendar_control=self.webpackChunkcalendar_control||[]).push([[772],{952:(e,t,a)=>{a.r(t),a.d(t,{default:()=>P});var r={};a.r(r),a.d(r,{default:()=>W});var n=a(783),l=a.n(n),s=a(745);let c=function(e){return e[e.Empty=0]="Empty",e[e.Work=1]="Work",e[e.Weekend=2]="Weekend",e[e.Holiday=3]="Holiday",e[e.Preholiday=4]="Preholiday",e}({});const o="Previous",u="Next";var d=a(793);function m(e,t){let a=new Date((new Date).setMonth(e));return(r=a.toLocaleString(t,{month:"long"})).charAt(0).toUpperCase()+r.slice(1);var r}const i=a(835),y=a(581),h=({Days:e,Culture:t})=>{const a=Array.from(new Set(e.map((e=>e.Date.getMonth()))));let r=[],n=[],s=[];return a.forEach((a=>{let c=e.filter((e=>e.Date.getMonth()==a));r.push(l().createElement(k,{key:a,Name:m(a,t),Days:c,Culture:t})),n.push(l().createElement(N,{key:a,Days:c,Culture:t})),s.push(l().createElement(E,{key:a,Days:c,Culture:t}))})),l().createElement("div",{className:"head-element quarter-block"},r,n,s)},k=({Days:e,Name:t})=>{const{t:a}=(0,d.$)();let r=e[0].Date,n=r.getDay();0==n&&(n=7);for(let t=1;t<n;t++){let a={Date:new Date(new Date(r).setDate(r.getDate()-t)),Type:c.Empty};e.unshift(a)}let s=e[e.length-1].Date,o=s.getDay();0==o&&(o=7);for(let t=1;t<=7-o;t++){let a={Date:new Date(new Date(s).setDate(s.getDate()+t)),Type:c.Empty};e.push(a)}const u=function(e){return[e("calendar.weekDays.monday"),e("calendar.weekDays.tuesday"),e("calendar.weekDays.wednesday"),e("calendar.weekDays.thursday"),e("calendar.weekDays.friday"),e("calendar.weekDays.saturday"),e("calendar.weekDays.sunday")]}(a).map(((e,t)=>{let a="day-item";return t>4&&(a+=" weekend"),l().createElement("h4",{key:e,className:a},e)}));return l().createElement("div",{className:"month-block"},l().createElement("h3",{className:"month-name"},t),l().createElement("div",{className:"days-grid week-header"}," ",u),l().createElement("div",{className:"days-grid"},e.map((e=>l().createElement(D,{key:e.Date.toDateString(),Date:e.Date,Type:e.Type})))))},D=({Date:e,Type:t})=>{let a="",r=e.getDate().toString();switch(t){case c.Empty:r="",a="empty";break;case c.Holiday:a="holiday";break;case c.Weekend:a="weekend";break;case c.Preholiday:a="preholiday"}let n=["day-item",a].join(" ");return l().createElement("div",{className:n},r)},p=({Stats:e})=>{const t=e.map((e=>l().createElement("div",{className:"stat",key:e.StatName},l().createElement("div",null,e.StatName),l().createElement("div",null,e.StatValue))));return l().createElement("div",{className:"stat-block"},t)},N=({Days:e})=>{let t=e.length,a=e.filter((e=>e.Type==c.Holiday||e.Type==c.Weekend)).length,r=e.filter((e=>e.Type==c.Preholiday||e.Type==c.Work)).length;const{t:n}=(0,d.$)();let s=[{StatName:n("calendar.statNames.all"),StatValue:t},{StatName:n("calendar.statNames.weekends"),StatValue:a},{StatName:n("calendar.statNames.work"),StatValue:r}];return l().createElement(p,{Stats:s})},E=({Days:e})=>{let t=e.filter((e=>e.Type==c.Preholiday||e.Type==c.Work)).length;const{t:a}=(0,d.$)();let r=[{StatName:a("calendar.statNames.40"),StatValue:Math.floor(t/5*40)},{StatName:a("calendar.statNames.36"),StatValue:Math.floor(t/5*36)},{StatName:a("calendar.statNames.24"),StatValue:Math.floor(t/5*24)}];return l().createElement(p,{Stats:r})},g=({Name:e,Days:t,BtnHandler:a,Culture:r})=>l().createElement("div",{className:"head-element"},l().createElement("div",{className:"header"},l().createElement("button",{className:"button",name:o,title:"Туда",onClick:a},l().createElement("img",{src:i})),l().createElement("h3",null,e),l().createElement("button",{className:"button",name:u,onClick:a},l().createElement("img",{src:y}))),l().createElement(N,{Days:t,Culture:r}),l().createElement(E,{Days:t,Culture:r})),w=()=>{const{t:e}=(0,d.$)();return l().createElement("div",{className:"error-info"},e("calendar.errorText"))};var f=a(7),S=a.n(f),v=a(176),C=a(71),T=a(718);const b={en:{translation:JSON.parse('{"calendar":{"quarterName":"quarter","errorText":"Error when displaying the data. The data is missing or incorrect.","weekDays":{"monday":"Mon","tuesday":"Tue","wednesday":"Wed","thursday":"Thu","friday":"Fri","saturday":"Sat","sunday":"Sun"},"statNames":{"24":"24-hour week","36":"36-hour week","40":"40-hour week","all":"Calendar days","weekends":"Weekends and holidays","work":"Working days"}}}')},ru:{translation:JSON.parse('{"calendar":{"quarterName":"квартал","errorText":"Ошибка при отображении данных. Данные отсутствуют или некорректны.","weekDays":{"monday":"Пн","tuesday":"Вт","wednesday":"Ср","thursday":"Чт","friday":"Пт","saturday":"Сб","sunday":"Вс"},"statNames":{"24":"24-часовая неделя","36":"36-часовая неделя","40":"40-часовая неделя","all":"Календарных дней","weekends":"Выходных и праздничных","work":"Рабочих дней"}}}')}};let x;x||(x=S().createInstance().use(v.Z).use(C.Z).use(T.Db).init({resources:b,debug:!0,fallbackLng:"en",supportedLngs:["en","ru","en-US","ru-RU"],initImmediate:!1}));function I(e,t){let a="";switch(e){case 1:a="I";break;case 2:a="II";break;case 3:a="III";break;case 4:a="IV"}return`${a} ${t("calendar.quarterName")}`}const M=({initialContext:e,api:t})=>{const[a,r]=(0,n.useState)((()=>t.getEntity())),[s,c]=l().useState(e);let m=[];try{m=JSON.parse(a.JsonInfo).map((e=>({Date:new Date(e.Date),Type:e.Type})))}catch(e){return l().createElement(w,null)}if(m.length<365)return l().createElement(w,null);const[i,y]=(0,n.useState)(Math.floor(((new Date).getMonth()+3)/3));let k=m.filter((e=>Math.floor((e.Date.getMonth()+3)/3)==i));const D=s.currentCulture??"ru",{t:p,i18n:N}=(0,d.$)();l().useEffect((()=>{N.changeLanguage(D)}),[D]);const E=l().useCallback((e=>{r(t.getEntity()),c(e)}),[t,r]);t.onControlUpdate=E;return l().createElement("div",{className:"main"},l().createElement("div",{className:"lined"},l().createElement(g,{Name:a.Year.toString(),Days:m,BtnHandler:e=>{let a=e.currentTarget.name;a!=o?a!=u||t.executeAction("NextYear"):t.executeAction("PreviousYear")},Culture:D})),l().createElement(g,{Name:I(i,p),Days:k,BtnHandler:e=>{let t=e.currentTarget.name,a=i;t==o?a-=1:t==u&&(a+=1),a>4?a=1:a<1&&(a=4),y(a)},Culture:D}),l().createElement(h,{Days:k,Culture:D}))},W=e=>{const t=(0,s.s)(e.container);return t.render(n.createElement(M,{initialContext:e.initialContext,api:e.api,controlInfo:e.controlInfo})),Promise.resolve((()=>t.unmount()))},P={"calendar-control-card-loader":r}},581:(e,t,a)=>{e.exports=a.p+"images/Next_1.0..svg"},835:(e,t,a)=>{e.exports=a.p+"images/Prev_1.0..svg"}}]);
//# sourceMappingURL=772_1.0_ef1fb496.js.map